<!DOCTYPE html>
{% extends "blog/base.html" %***REMOVED***
{% load static %***REMOVED***
{% block extra_head  %***REMOVED***
<!--代码高亮 -->
<link rel="stylesheet" href="{% get_static_prefix  %***REMOVED***md_css/{{article.codehilite_style***REMOVED******REMOVED***.css">
{% endblock  %***REMOVED***

{% block title %***REMOVED***{{article.title***REMOVED******REMOVED***{% endblock title %***REMOVED***

{% block content %***REMOVED***
<div class="container">
    <div class="row">
        <!-- 展示文章的title -->
        <h1 class="col-12 mt-4 mb-4">{{ article.title ***REMOVED******REMOVED***</h1>
        <!-- 展示文章的author -->
        <div class="alert alert-success">作者：<a href="{% url 'blog:profile' article.author  %***REMOVED***" class="alert-link">{{ article.author ***REMOVED******REMOVED***</a></div>
        <!-- 展示文章author的signature -->
        <div class="alert alert-light">{{ article.author.signature ***REMOVED******REMOVED***</div>
        <div class="col-12"></div>
        <div class="col-3 alert alert-light">创建于 {{ article.created |date:"Y/m/d H:i:s"***REMOVED******REMOVED***</div>
        <div class="col-3 alert alert-light">更新于 {{ article.updated |date:"Y/m/d H:i:s"***REMOVED******REMOVED***</div>
        <!-- 文章正文 -->
        {%  if request.session.id == article.author.id  %***REMOVED***
        <div class="dropdown">
            <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                操作
            </a>

            <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <a class="dropdown-item" href="{% url 'blog:update_article' article.id %***REMOVED***">修改</a>
                <a class="dropdown-item" href="{%  url 'blog:delete_article' article.id %***REMOVED***">删除</a>
            </div>
        </div>
        {% if article.censored == False  %***REMOVED***
        <div class="col-12 alert alert-info">待AI审核</div>
        {% elif article.visible == False  %***REMOVED***
        <div class="col-12 alert alert-warning">AI审核不通过，请修改文章后提交</div>
        {% elif article.visible == True  %***REMOVED***
        <div class="col-12 alert alert-success">AI审核通过</div>
        {% endif  %***REMOVED***
        {% endif  %***REMOVED***
        <div class="col-12 bg-light">
            <p>{{ article.body |safe***REMOVED******REMOVED***</p>
        </div>
    </div>
    <!--评论版-->
    {% if request.session.id %***REMOVED***
    <div>
        <br/>
        <form action="{% url 'blog:post_comment' article.id %***REMOVED***" method="POST" >
            {% csrf_token %***REMOVED***
            <div class="form-group">
                <label for="body">
                    <strong>
                        评论
                    </strong>
                </label>
                <textarea 
                       type="text" 
                       class="form-control" 
                       name="body" 
                       rows="2"></textarea>
            </div>
            <!-- 提交按钮 -->
            <button type="submit" class="btn btn-primary ">发送</button>                    
        </form>
    </div>
    <br>
    {% else %***REMOVED***
    <br>
    <h5 class="row justify-content-center">
        请<a href="{% url 'blog:login' %***REMOVED***">登录</a>后回复
    </h5>
    <br>
    {% endif %***REMOVED***
    <div>
        {% for comment in comments %***REMOVED***
        <br>

            {% if comment.user == article.author  %***REMOVED***
            <div class="alert alert-success">
                <a href="{% url 'blog:profile' comment.user  %***REMOVED***" class="alert-link">{{ comment.user ***REMOVED******REMOVED***&nbsp
                </a>
                <span style="">
                    {{ comment.created|date:"Y/m/d H:i:s" ***REMOVED******REMOVED***
                </span>
                {% if comment.user.id == request.session.id  %***REMOVED***
                <a href="{% url 'blog:delete_comment' comment.id %***REMOVED***?delete_comment=yes" class="alert-link">&nbsp&nbsp删除
                {% endif  %***REMOVED***
                </a>
            </div>
            {% else  %***REMOVED***
            <div class="alert alert-info">
                <a href="{% url 'blog:profile' comment.user  %***REMOVED***" class="alert-link">{{ comment.user ***REMOVED******REMOVED***&nbsp
                </a>
                <span style="">
                    {{ comment.created|date:"Y/m/d H:i:s" ***REMOVED******REMOVED***
                </span>
                {% if comment.user.id == request.session.id  %***REMOVED***
                <a href="{% url 'blog:delete_comment' comment.id %***REMOVED***?delete_comment=yes" class="alert-link">&nbsp&nbsp删除
                {% endif  %***REMOVED***
                </a>
            </div>
            {% endif  %***REMOVED***
        <div class="col-12 bg-light">
            <p>{{ comment.body |safe***REMOVED******REMOVED***</p>
        </div>
        {% endfor %***REMOVED***
    </div>
</div>

{% endblock content %***REMOVED***
